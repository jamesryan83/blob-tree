var BlobTree=function(){function t(t){(this.options=t)&&t.treeEl?document.getElementById(t.treeEl)||console.log("blob-tree: treeEl not found"):console.log("blob-tree: treeEl missing")}return t.prototype.formatBlobsForTree=function(t){var s=this;return t&&0!==t.length?(this.options.ignore&&0<this.options.ignore.length&&(t=t.filter(function(t){var e=t.name.split(".");return!(e&&1<e.length&&-1!==s.options.ignore.indexOf(e[e.length-1]))&&t})),(t=t.map(function(t){var e=t.name.split("/"),i=!1;return s.options.folderFile&&0<e.length&&e[e.length-1]===s.options.folderFile&&(e.pop(),i=!0),{name:e[e.length-1],path:e.join("/"),pathParts:e,isFolder:i}})).sort(function(t,e){for(var i=0,s=Math.min(t.pathParts.length,e.pathParts.length);i<s;i++){var a=i!==t.pathParts.length-1||s===t.pathParts.length&&t.isFolder,l=i!==e.pathParts.length-1||s===e.pathParts.length&&e.isFolder;if(a&&!l)return-1;if(!a&&l)return 1;if(t.pathParts[i]<e.pathParts[i])return-1;if(t.pathParts[i]>e.pathParts[i])return 1}return t.pathParts.length>e.pathParts.length?1:e.pathParts.length>t.pathParts.length?-1:0}),t):[]},t.prototype.createTree=function(t){var l=this;if(t&&0!==t.length){var e=this.formatBlobsForTree(t),a=document.createElement("ul");e.forEach(function(t){var e=document.createElement("li");e.title=t.name,e.setAttribute("data-path",t.path),e.classList.add("blob-tree-item"),e.classList.add("isVisible"),t.isFolder&&(e.classList.add("isFolder"),e.classList.add("isExpanded")),e.setAttribute("style","padding-left: "+(30+15*(t.pathParts.length-1))+"px"),t.li=e;var i=document.createElement("label"),s=t.name.split(".");s&&1<s.length&&s.pop(),s=s.join("."),i.appendChild(document.createTextNode(s)),e.appendChild(i),a.appendChild(e)}),a.addEventListener("click",function(t){if(t.target&&"LI"==t.target.nodeName){t.stopPropagation();var e=t.target,i=e.getAttribute("data-path"),s=i.split("/"),a={name:s[s.length-1],path:i,pathParts:s,isFolder:e.classList.contains("isFolder"),isVisible:e.classList.contains("isVisible"),li:e};a.isFolder&&(a.isExpanded=e.classList.contains("isExpanded"),l.expandCollapseItems(a)),l.setSelectedItem(a),l.options.onItemClicked&&l.options.onItemClicked(a)}});var i=document.getElementById(this.options.treeEl),s=i.firstChild;s&&i.removeChild(s),i.appendChild(a)}},t.prototype.getSelectedItem=function(){var t=document.querySelectorAll(".blob-tree-item.isSelected");if(t&&0<t.length)return this.getItemFromPath(t[0].getAttribute("data-path"))},t.prototype.setSelectedItem=function(t){t&&t.isSelected||(document.querySelectorAll(".blob-tree-item").forEach(function(t){return t.classList.remove("isSelected")}),t&&t.li.classList.add("isSelected"))},t.prototype.expandCollapseItems=function(t){if(t&&t.isFolder){t.isExpanded?t.li.classList.remove("isExpanded"):t.li.classList.add("isExpanded"),t.isExpanded=!t.isExpanded;for(var e=!1,i=null,s=null,a=document.getElementById("blob-tree").children.item(0),l=0;l<a.childElementCount;l++){if(s=(i=a.children.item(l)).getAttribute("data-path"),e){if(s.split("/").length<=t.pathParts.length)break;if(t.isExpanded){var n=null;if(0<l)t:for(var r=l-1;0<=r;r--){var o=a.children.item(r);if(o.classList.contains("isFolder")&&o.getAttribute("data-path").split("/").length<i.getAttribute("data-path").split("/").length){n=o;break t}}else n=i;n&&n.classList.contains("isFolder")&&n.classList.contains("isExpanded")&&n.classList.contains("isVisible")&&i.classList.add("isVisible")}else i.classList.remove("isVisible")}s===t.path&&(e=!0)}}},t.prototype.getItemFromPath=function(t){var e=document.querySelectorAll("[data-path='"+t+"']");if(e&&0<e.length){var i=t.split("/"),s={name:i[i.length-1],path:t,pathParts:i,isFolder:e[0].classList.contains("isFolder"),isVisible:e[0].classList.contains("isVisible"),li:e[0]};return s.isFolder&&(s.isExpanded=e[0].classList.contains("isExpanded")),s}},t.prototype.removeFile=function(t){if(t){var e=this.getItemFromPath(t);e&&!e.isFolder&&e.li.parentNode.removeChild(e.li)}},t.prototype.removeFolder=function(i){if(!i)return[];var s=[],t=this.getItemFromPath(i);return i+="/",t&&t.isFolder&&document.querySelectorAll(".blob-tree-item").forEach(function(t){var e=t.getAttribute("data-path");t.classList.contains("isFolder")&&(e+="/"),0===e.indexOf(i)&&(t.parentNode.removeChild(t),s.push(e))}),s},t}();"undefined"!=typeof module&&this.module!==module&&(exports=module.exports=BlobTree);